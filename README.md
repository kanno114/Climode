# Climode（仮）

---

## ■サービス概要

睡眠・気分・症状などの身体データと、天気・気圧・花粉・PM2.5 などの環境データを統合して体調をスコア化する健康管理アプリです。  
日々の記録から体調の傾向を分析し、翌日の体調を予測して行動提案を行います。  
日本特有の気候・季節要因を反映し、予防や生活改善をサポートします。  

---

## ■ このサービスへの思い・作りたい理由

季節の変わり目や天候が不安定な時期に体調を崩すことが多く、  
「あらかじめ頑張れる日と無理をしない日が分かれば、自分のペースで過ごせる」と感じました。  
しかし既存のアプリは睡眠・気圧・気分などの要素が分断され、体調の全体像を把握しにくいのが現状です。  
そこで、睡眠・気分・環境要因を統合して体調をスコア化し、日々の生活全体を“見える化”できる仕組みを目指します。  

---

## ■ ユーザー層について

- **気象や季節で体調を崩しやすい人**  
  偏頭痛や倦怠感など「気象病」に悩んでおり、体調と気象データの相関を知ることで強い価値を感じやすい。  

- **メンタルと身体の変化を同時に管理したい人**  
  ストレスや気分の波が体調に影響する自覚があり、一元管理のニーズが強い。  


- **20〜40代の健康意識が高い人**  
  ライフログや自己管理に関心があり、日常を記録する習慣を持つため継続利用が期待できる。  

---

## ■サービスの利用イメージ

朝に睡眠・気分・症状を入力し、自動取得した天気や気圧データと統合して体調スコアを算出。  
日中は気圧の急降下や花粉増加などに応じた通知で予防行動をサポート。  
夜に一日の体調を振り返って記録し、週末にはグラフやインフォグラフィックで傾向分析を確認。  
これにより自分の体調パターンを客観的に把握できる。  

### 入力を継続しやすくする仕組み
毎日朝晩の入力は負担になりやすいため、**「短時間で終わる・続けたくなる」**設計を導入します。

1. **通知**  
   - 朝起床後・夜就寝前のリマインド通知からワンタップで入力画面へ遷移  

2. **UIの簡略化**  
   - 前日の入力を初期値として表示し、±ボタンやスライダーで数秒で修正可能  
   - 気分はアイコン、症状はチップ選択、主観スコアはスライダー1本で完了  

3. **インセンティブ設計**  
   - **連続記録日数表示**：Streakを可視化し達成感を提供  
   - **効果を“見える化”**：例「低気圧の日に休憩を入れた → 翌日のスコア+10」といった因果を即時フィードバック  

---

## ■ ユーザーの獲得について

**検索（SEO × Next.js SSR/ISR）**  
- サーバーサイドレンダリング（SSR）やインクリメンタル静的再生成（ISR）を活用し、検索エンジンに最適化したページを提供。  
- 「気圧頭痛」「体調管理アプリ」「花粉症 記録」など実検索キーワードに対応したコンテンツを公開し、自然検索からの流入を強化。  

**SNS共有機能**  
- 週次レポートや体調スコアをワンタップで SNS に共有できる機能を実装。  
- 見栄えの良いインフォグラフィックや OG 画像を生成し、シェアしたくなる体験を提供。  
- 自然なクチコミ拡散を促し、新規ユーザー獲得につなげる。  

---

## ■ サービスの差別化ポイント・推しポイント

- **既存との差別化**  
  - 海外アプリ（例：Bearable）の総合性に、日本特有の気候要因（花粉・梅雨・PM2.5）を加味。  
  - ユーザーごとにスコアの重み付けを調整可能。  

- **推しポイント**  
  - 身体・メンタル・環境を三位一体で分析。  
  - 視覚的に楽しいインフォグラフィック。  
  - 使い続けるほど「自分専用の健康アドバイザー」に進化。  

---

## ■ 機能候補

- **MVP**  
  - アカウント作成・ログイン（Google認証も含む）  
  - 日次記録フォーム（睡眠・気分・症状）  
  - 天気・気圧の自動取得（位置情報ベース／現在値のみ）  
  - 固定重みスコア算出  
  - 固定ロジックによる行動提案  
  - カレンダー表示  
  - 振り返り機能

- **本リリース（将来的に追加）**  
  - 気温・湿度・気圧の変化量を自動取得してロジックに組み込み  
  - カスタム項目追加  
  - スコア重み調整 UI  
  - 花粉・PM2.5 データ連携  
  - プッシュ通知（気圧急降下／花粉増加など）  
  - 主観スコア入力と翌日予測モデル  
  - 週次レポート（グラフ・インフォグラフィック）  
  - 相関分析による個別提案  
  - SNS共有機能  
  - パスワードリセット

---

## ■ 機能の実装方針予定

- **外部データ取得**  
  - MVP：Open-Meteo API（現在値のみ）  
  - 本リリース：気圧変化量などを取得可能な API に置き換え予定  
  - Japan Air Quality API／環境省データ（花粉・PM2.5）  

- **位置情報の扱い**  
  - 端末の位置情報を利用  
  - オフの場合は **Google Maps API 上でマーカーを置いて地域指定可能**  

- **スコア計算・提案ロジック**  
  - Rails のサービスクラスで実装  
  - gem「dentaku」で安全に数値・論理演算を評価  
  - 合成比率は MVP では仮設定、本リリースまでにエビデンスに基づいて更新予定  

- **通知**  
  - 条件に応じたプッシュ通知（気圧急降下や花粉増加など）をユーザー端末へ配信予定  
  - フロント側は Next.js の通知 API または Expo 通知を利用予定  

- **フロント UI**  
  - Next.js + shadcn/ui + fullcalendar  
  - インフォグラフィックは Recharts を利用予定  

---

## ■ 技術スタック

### バックエンド
- Ruby 3.3.6 / Rails 7.2.0（APIモード）  
- PostgreSQL  
- Gem: bcrypt, rack-cors, dentaku  
- デプロイ: Render  

### フロントエンド
- Node.js 23 / React 19 / Next.js 15.3.3（App Router）  
- ライブラリ: next-auth, shadcn/ui, conform, zod, fullcalendar  
- デプロイ: Vercel  

## 画面遷移図
Figma：https://www.figma.com/design/m5hewFPoHuV17jHZyEieNu/Climode?node-id=0-1&t=sZxqX7T29XB3hBUD-1
